<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../template/mainTemplate.xhtml">

            <ui:define name="content">
                <h:form>
                    <p:growl id="messages" showDetail="true" />

                    <style>
                        .ui-widget-content {
                            border: 1px solid #a8a8a8;
                            background: #fff;
                            background-color: rgba(152,210,128,0.6); 
                            color: black;

                        }

                        .ui-rating-star a{

                            width: 42px;
                            height: 40px;
                            display: block;
                            background: url(../resources/images/tenedores.png) no-repeat 0 0;
                        }
                        .ui-rating-cancel a {

                            width: 42px;
                            height: 40px;
                            display: block;
                            background: url(../resources/images/cancel.png) no-repeat 0 0;
                        }
                        .ui-rating-star-on a {


                            background: url(../resources/images/tenedoreson.png) no-repeat 0 0;
                            display: block;
                            height: 40px;
                            width: 42px;  

                        }
                        @font-face{
                            font-family: 'Garlic Sans';
                            font-weight: normal;
                            font-style: normal;
                            src: url('../resources/fonts/Garlic-Sans-Regular.ttf')format('truetype');
                        }
                        @font-face{
                            font-family: 'Typo Round Bold Demo';
                            font-weight: normal;
                            font-style: normal;
                            src: url('../resources/fonts/Typo_Round_Bold_Demo.ttf')format('truetype');
                        }
                        .ui-panel {
                            padding: .0em; 
                        }

                        .ui-datalist .ui-datalist-header {
                            border-bottom: 0 none;
                            background-color: rgba(152,210,128,1);
                            font-family: Garlic Sans;
                        }
                        .ui-widget-header {
                            border: 1px solid #a8a8a8;
                            background: #c4c4c4 url(/jadaxi/faces/javax.faces.resource/images/ui-bg_highlight-soft_100_c4c4c4_1x100.png?ln=primefaces-aristo) 50% 50% repeat-x;
                            background: #c4c4c4 linear-gradient(top,rgba(255,255,255,0.8),rgba(255,255,255,0));
                            background: #c4c4c4 -webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,0.8)),to(rgba(255,255,255,0)));
                            background-color:  rgba(152,210,128,1);
                            color: #333;
                            font-weight: bold;
                            height: 50%;
                            text-align: center;
                            font-family:Garlic Sans; 
                            font-size: 25px;
                            text-shadow: 0 1px 0 rgba(255,255,255,0.7);
                        }
                        .ui-panel-titlebar {
                            padding: 4px 10px;
                        }

                        .titulo{

                            text-align: center;
                            background-color: lightgray;
                            color:black;
                            font-size: 50px;

                            font-family: Garlic Sans;


                        }



                    </style>

                    <!--TODO arreglar color verde claro en el desplegable -->
                    <div class="titulo" >
                        #{viewRecipeControler.recipe.name}
                    </div>
                    <br/>
                    <p:graphicImage value="#{viewRecipeControler.image}" styleClass="content" stream="false" style="margin-left: 25%; width: 50%; height: 50%"/>
                    <div>
                        <p:panel id="basic" header="VALORACION Y VER RECETA" style="margin-left: 25%; width: 49.8%; height: 50%">
                            <h:panelGrid class="fondoverde" columns="2" cellpadding="10">
                                <p:rating value="#{viewRecipeControler.rating}" style=" width: 260px; margin-right: 20%">
                                    <p:ajax event="rate" listener="#{viewRecipeControler.onrate}" update="messages" />
                                    <p:ajax event="cancel" listener="#{viewRecipeControler.oncancel}" update="messages" />
                                </p:rating>
                                <!--TODO comprobar nivel-->
                                <p:commandButton value="Guardar Receta" actionListener="#{viewRecipeControler.addToMyRecipes()}"  update="messages" style="  height: 50px;color: black; text-shadow: 0px 0 rgba(0,0,0,1); background-color: darkgreen; width: 100%;margin-right: 20px ; margin-left: 50%;;"  />
                                <p:commandButton value="Exportar pdf" actionListener="#{viewRecipeControler.addToMyRecipes()}"  update="messages" style="  height: 50px;color: black; text-shadow: 0px 0 rgba(0,0,0,1); background-color: darkgreen; width: 100%;margin-right: 20px"  />
                                <p:linkButton  rendered="#{viewRecipeControler.viewEditButton()}" value="Editar receta"   outcome="editRecipe"   style="  height: 50px;color: black; text-shadow: 0px 0 rgba(0,0,0,1); background-color: darkgreen; width: 100%;margin-right: 20px ; "  />
                                <p:outputLabel rendered="#{viewRecipeControler.viewUserLabel()}" value="Receta de: #{viewRecipeControler.gerUserName()}"/>
                            </h:panelGrid>
                        </p:panel>
                    </div>

                    <p:dataList value="#{viewRecipeControler.ingredientsList}" var="ingre" type="ordered" style=" font-family: Garlic Sans; font-size: 22px; width: 50%; margin-left: 25%">
                        <f:facet name="header">
                            Ingredientes
                        </f:facet>
                        #{ingre.name},  #{ingre.quantity} g
                    </p:dataList>
                    <p:dataList value="#{viewRecipeControler.stepsList}" var="step" type="ordered" style=" font-family: Garlic Sans; font-size: 22px; width: 50%; margin-left: 25%">
                        <f:facet name="header">
                            Pasos
                        </f:facet>
                        <div style=" font-family: Garlic Sans;font-size: 22px; font-weight: bold;">#{step.title}:</div>


                        #{step.description} 
                        <br/>
                        <br/>

                    </p:dataList>





                </h:form>





            </ui:define>

        </ui:composition>

    </body>
</html>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">


    <h:head>
        <title>TODO supply a title</title>


        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    </h:head>

    <h:body style="background-image: url(resources/images/fondo2.jpg)">

        <ui:composition template="./../template/mainTemplate.xhtml">

            <ui:define name="content">
                <style>
                    .noHeader.ui-datatable table thead tr {
                        display: none;
                    }
                    .ui-panel {
                        padding: .0em; 
                    }
                    .ui-panel .ui-panel-content {
                        border: 0;
                        height: 150px; 
                        width: 100%;
                        background: 0;
                        padding: .1em 1em;
                        padding-left: 0px;padding-right: 0px;
                        /* background-color:rgb(61, 110, 56); */
                        background-color: rgba(152,210,128,0.6);
                        color: black;

                    }
                    .ui-panel .ui-panel-titlebar {
                        padding: .3em 1em .2em;
                        height: 55px;
                        border: 1px;
                        background-color: rgb(61, 110, 56); 
                        border-color: black;
                        font-family: Garlic Sans;

                        font-size: 25px;
                    }
                    .ui-widget-content {
                        border: 1px solid #a8a8a8;
                        background-color: rgba(152,210,128,0.6);
                        color: black;
                    }
                    .ui-widget-header {
                        text-shadow: 0px 0 rgba(0,0,0,1);
                    }
                    .ui-dataview .ui-dataview-header {
                        display: none;
                    }
                    @font-face
                    {
                        font-family: 'Garlic Sans';
                        font-weight: normal;
                        font-style: normal;
                        src: url('../resources/fonts/Garlic-Sans-Regular.ttf')format('truetype');
                    }
                    @font-face
                    {
                        font-family: 'Typo Round Bold Demo';
                        font-weight: normal;
                        font-style: normal;
                        src: url('../resources/fonts/Typo_Round_Bold_Demo.ttf')format('truetype');
                    }


                    .titulo{

                        text-align: center;
                        background-color: lightgray;
                        color:black;
                        font-size: 50px;

                        font-family: Garlic Sans;


                    }


                </style>

                <script>

                    $(document).on('click', '.flow .item', function () {
                        var imageIndex = $(this).index();// the image index
                        $(this).find('canvas').attr('src');// the image src
                        // then you could call a remoteCommand from here passing the index
                    })
                    function clickFlow(item, e, image2) {
                        //prevents image opening...                                                                     
                        if ($(item).parent().hasClass('active')) {
                            e.stopImmediatePropagation();
                            console.log(Object.values(image2));
                            var imageIndex = $(this).index();
                            console.log(imageIndex);
                        }
                    }
                </script>

                <div class="titulo" >
                    TOP 10 RECETAS: 
                </div>

                <p:contentFlow style="background-color: rgba(152,210,128,0.6);" class="flow" var="image" value="#{mainPageControler.images}">

                    <p:graphicImage value="#{image}" styleClass="content" stream="false" onclick="clickFlow(this, event, '#{image}')"/>



                </p:contentFlow>

                <h:form>


                    <div class="titulo">
                        CATEGORIAS:
                    </div>



                    <p:dataView  class="noHeader" var="buttons" value="#{mainPageControler.categories}"
                                 gridIcon="pi pi-th-large" listIcon="pi pi-bars" layout="grid" widgetVar="asdasd" >

                        <p:dataViewGridItem columns="6"  >
                            <p:panel header="#{buttons.name}: #{buttons.ammount}" style="text-align:center;">
                                <h:panelGrid columns="1" style="  padding-top: 10%; padding-bottom: 5%; padding-left: 0px;padding-right: 0px;">



                                    <p:commandButton  style=" font-family: Typo Round Bold Demo; font-size: 20px; height: 90px; width: 100%; background-color: rgb(0, 102, 0); color: black; text-shadow: 0px 0 rgba(0,0,0,1);" value="Ver todas las recetas de #{buttons.name}" action="#{mainPageControler.goToviewRecipesInCategories(buttons.name)}"/>

                                </h:panelGrid>
                            </p:panel>   
                        </p:dataViewGridItem>


                    </p:dataView>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <div class="titulo" >
                        BUSQUEDA POR INGREDIENTE: 
                    </div>

                    <p:dataView   class="noHeader" var="buttonsIng" value="#{mainPageControler.ingredients}"
                                 gridIcon="pi pi-th-large" listIcon="pi pi-bars" layout="grid" widgetVar="asdasd" >

                        <p:dataViewGridItem  columns="6"  >
                            <p:panel header="#{buttonsIng.name} " style="text-align:center;">
                                <h:panelGrid  columns="1" style="  padding-top: 10%; padding-bottom: 5%; padding-left: 0px;padding-right: 0px;">



                                    <p:commandButton update="messages" style="  font-family: Typo Round Bold Demo; font-size: 20px;  height: 100px; width: 100%; background-color: rgb(0, 102, 0); color: black ; text-shadow: 0px 0 rgba(0,0,0,1);" value="Recetas que contengan #{buttonsIng.name}" action="#{mainPageControler.goToviewRecipesIngredients(buttonsIng.name)}"/>

                                </h:panelGrid>
                            </p:panel>   
                        </p:dataViewGridItem>


                    </p:dataView>

                </h:form>

            </ui:define>


        </ui:composition>

    </h:body>
</html>
